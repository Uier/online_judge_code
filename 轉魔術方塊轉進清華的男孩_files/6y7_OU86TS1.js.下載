if (self.CavalryLogger) { CavalryLogger.start_js(["DC+fa"]); }

__d('MercuryRTCShareAttachment.react',['cx','fbt','FBRTCCore','FBRTCLogger','FBRTCSupport','Image.react','React','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryViewer','MercuryParticipants','MercuryIDs','MercuryTimestamp','MNRTCCallabilityStore','SimpleXUIDialog','XUIText.react','XUIButton.react','CenteredContainer.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('MercuryShareAttachmentRenderLocations').CHAT,n=c('MercuryShareAttachmentRenderLocations').MESSENGER,o=c('MercuryShareAttachmentRenderLocations').WEB_INBOX;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={peerName:null},this.$MercuryRTCShareAttachment1=function(v,w,x){var y='/images/mercury/clients/messenger/admin_texts/';if(!v&&!w){y+='adminTextMissedCall.png';}else if(w){y+='adminTextOutgoingCall.png';}else y+='adminTextIncomingCall.png';return (c('React').createElement('div',{className:"_2phz"},c('React').createElement(c('Image.react'),{src:y,className:"_2pih"}),c('React').createElement('span',{className:v||w?"_3ole":''},x)));},this.$MercuryRTCShareAttachment2=function(v,w,x,y){if(c('FBRTCSupport').isOSSupported()){return (c('React').createElement('a',{onClick:this.$MercuryRTCShareAttachment4.bind(this,v,w),role:'button',tabIndex:'0'},!x&&!y?i._("Call Back"):i._("Call Again")));}else return (c('React').createElement('span',null,!x&&!y?i._("Call Back"):i._("Call Again")));}.bind(this),this.$MercuryRTCShareAttachment3=function(v,w,x,y){var z=!x&&!y?i._("Call Back"):i._("Call Again");return (c('React').createElement(c('XUIButton.react'),{onClick:this.$MercuryRTCShareAttachment4.bind(this,v,w),label:z}));}.bind(this),this.$MercuryRTCShareAttachment4=function(v,w){if(c('FBRTCCore').isAvailableForWebrtcCalling(v)||c('MNRTCCallabilityStore').isCallable(v)){c('FBRTCCore').startOutgoingCall(v,c('FBRTCLogger').Trigger.ADMIN_MESSAGE,false);}else c('SimpleXUIDialog').show(i._("{firstname} can't be reached right now.",[i.param('firstname',w)]),i._("Can't Connect Call"));},r;}p.prototype.componentDidMount=function(){var q=this.props.attachment.log_message_data.caller,r=this.props.attachment.log_message_data.callee,s=q===c('MercuryViewer').getID(),t=s?r:q;c('MercuryParticipants').get(t,function(u){this.setState({peerName:u.short_name?u.short_name:u.name});}.bind(this));};p.prototype.render=function(){var q=this.props.attachment.log_message_data.caller,r=this.props.attachment.log_message_data.callee,s=this.props.attachment.log_message_data.answered,t=q===c('MercuryViewer').getID(),u=t?r:q,v=c('MercuryIDs').getUserIDFromParticipantID(u),w=this.state.peerName,x=c('MercuryTimestamp').getPreciseTimestamp(this.props.attachment.timestamp),y=this.props.attachment.log_message_body,z=this.$MercuryRTCShareAttachment1(s,t,x),aa=void 0,ba=void 0;if(this.props.location===m){aa=this.$MercuryRTCShareAttachment2(v,w,s,t);return c('React').createElement('div',{className:"_1k2i"},c('React').createElement('div',{className:!s&&!t?"_1k2j":''},c('React').createElement(c('XUIText.react'),{weight:'bold'},y),c('React').createElement(c('XUIText.react'),{weight:'bold'},z)),c('React').createElement('hr',null),c('React').createElement(c('CenteredContainer.react'),{vertical:true,className:"_3-8x"},aa));}else if(this.props.location===n){aa=this.$MercuryRTCShareAttachment2(v,w,s,t);return c('React').createElement('div',{className:"_55q _5i_d _52mr"},c('React').createElement('div',{className:(!s&&!t?"_1k2j":'')+(' '+"_55r")},c('React').createElement(c('XUIText.react'),{weight:'bold'},y),c('React').createElement(c('XUIText.react'),{weight:'bold'},z)),c('React').createElement(c('CenteredContainer.react'),{vertical:true,className:"_3-8w"},aa));}else if(this.props.location===o){ba=this.$MercuryRTCShareAttachment3(v,w,s,t);return c('React').createElement('div',null,c('React').createElement('div',{className:(!s&&!t?"_1k2j":'')+(' '+"_55s")},y),c('React').createElement('div',{className:"_55t"},ba));}};p.propTypes={attachment:c('MercuryShareAttachmentReactShape'),location:l.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),rootClassName:l.string};f.exports=p;}),null);